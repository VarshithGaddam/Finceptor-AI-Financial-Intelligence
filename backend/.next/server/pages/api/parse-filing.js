"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/parse-filing";
exports.ids = ["pages/api/parse-filing"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "node-fetch":
/*!*****************************!*\
  !*** external "node-fetch" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("node-fetch");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fparse-filing&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cparse-filing.js&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fparse-filing&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cparse-filing.js&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_parse_filing_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\parse-filing.js */ \"(api)/./pages/api/parse-filing.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_parse_filing_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_parse_filing_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/parse-filing\",\n        pathname: \"/api/parse-filing\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_parse_filing_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnBhcnNlLWZpbGluZyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDcGFyc2UtZmlsaW5nLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQzBEO0FBQzFEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx1REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsdURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmFja2VuZC8/NDM1ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHBhcnNlLWZpbGluZy5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3BhcnNlLWZpbGluZ1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3BhcnNlLWZpbGluZ1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fparse-filing&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cparse-filing.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/parse-filing.js":
/*!***********************************!*\
  !*** ./pages/api/parse-filing.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! child_process */ \"child_process\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(child_process__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! util */ \"util\");\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(util__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var node_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node-fetch */ \"node-fetch\");\n/* harmony import */ var node_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(node_fetch__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst execPromise = util__WEBPACK_IMPORTED_MODULE_1___default().promisify(child_process__WEBPACK_IMPORTED_MODULE_0__.exec);\nconst LARGE_CAP_TICKERS = [\n    \"AAPL\",\n    \"MSFT\",\n    \"AMZN\",\n    \"GOOGL\",\n    \"GOOG\",\n    \"META\",\n    \"TSLA\",\n    \"BRK.A\",\n    \"BRK.B\",\n    \"JPM\",\n    \"V\",\n    \"PG\",\n    \"UNH\",\n    \"HD\",\n    \"MA\",\n    \"BAC\",\n    \"XOM\",\n    \"DIS\",\n    \"NVDA\",\n    \"PYPL\",\n    \"ADBE\",\n    \"INTC\",\n    \"CMCSA\",\n    \"PFE\",\n    \"WMT\",\n    \"CRM\",\n    \"NFLX\",\n    \"VZ\",\n    \"ABT\",\n    \"KO\"\n];\n// Valid SEC form types\nconst VALID_FORM_TYPES = [\n    \"10-K\",\n    \"10-Q\"\n];\nasync function handler(req, res) {\n    // CORS headers\n    res.setHeader(\"Access-Control-Allow-Credentials\", true);\n    res.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n    res.setHeader(\"Access-Control-Allow-Methods\", \"GET,OPTIONS,PATCH,DELETE,POST,PUT\");\n    res.setHeader(\"Access-Control-Allow-Headers\", \"X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version\");\n    if (req.method === \"OPTIONS\") {\n        res.status(200).end();\n        return;\n    }\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    }\n    const { ticker, formType, year } = req.body;\n    // Validate inputs\n    if (!ticker || !formType || !year) {\n        return res.status(400).json({\n            message: \"Missing required parameters: ticker, formType, year\"\n        });\n    }\n    if (!VALID_FORM_TYPES.includes(formType.toUpperCase())) {\n        return res.status(400).json({\n            message: `Invalid form type: ${formType}. Supported types are ${VALID_FORM_TYPES.join(\", \")}.`\n        });\n    }\n    const currentYear = new Date().getFullYear();\n    const yearInt = parseInt(year);\n    if (isNaN(yearInt) || yearInt > currentYear) {\n        return res.status(400).json({\n            message: `Invalid year ${year}. Must be a number not exceeding the current year (${currentYear}).`\n        });\n    }\n    const isLargeCapTicker = LARGE_CAP_TICKERS.includes(ticker.toUpperCase());\n    const isSpecialTicker = ticker.toUpperCase() === \"TSLA\";\n    if (isLargeCapTicker) {\n        console.log(`Using enhanced handling for ${ticker.toUpperCase()} filing (large cap stock)`);\n    }\n    try {\n        const pythonArgs = `${ticker} ${formType} ${year}`;\n        const pythonCommand = `py \"${process.cwd()}/sec_parser.py\" ${pythonArgs}`;\n        console.log(`Executing command: ${pythonCommand}`);\n        let maxBuffer = 10 * 1024 * 1024; // 10MB default\n        if (isSpecialTicker) {\n            maxBuffer = 50 * 1024 * 1024; // 50MB for TSLA\n        } else if (isLargeCapTicker) {\n            maxBuffer = 30 * 1024 * 1024; // 30MB for large caps\n        }\n        console.log(`Using maxBuffer of ${maxBuffer / (1024 * 1024)}MB for ${ticker}`);\n        const { stdout, stderr } = await execPromise(pythonCommand, {\n            maxBuffer\n        });\n        if (stderr && stderr.trim() !== \"\") {\n            console.log(\"Python script messages:\", stderr);\n            const isArtificialSectionMessage = stderr.includes(\"No sections parsed; sample content:\") && (stderr.includes(\"Created artificial sections\") || isLargeCapTicker);\n            const containsErrors = stderr.includes(\"ERROR:\") && !isArtificialSectionMessage && (!stdout || stdout.trim() === \"\");\n            const containsOnlyWarnings = stderr.includes(\"WARNING:\") && !containsErrors;\n            if ((isSpecialTicker || isLargeCapTicker) && stderr.includes(\"table of contents\") && containsErrors) {\n                return res.status(500).json({\n                    message: `This filing has a complex format. We're using a fallback method to parse it.`,\n                    details: stderr\n                });\n            }\n            if (containsErrors) {\n                if (stderr.includes(\"No filing found\")) {\n                    return res.status(404).json({\n                        message: `No filing found for ${ticker} ${formType} ${year}`\n                    });\n                }\n                return res.status(500).json({\n                    message: `Error processing SEC filing: ${stderr}`\n                });\n            }\n            console.log(\"Processing continues with warnings:\", stderr);\n        }\n        let result;\n        try {\n            const trimmedOutput = stdout.trim();\n            if (!trimmedOutput) {\n                return res.status(500).json({\n                    message: \"Empty response from Python script\",\n                    stderr: stderr\n                });\n            }\n            result = JSON.parse(trimmedOutput);\n        } catch (parseError) {\n            console.error(\"Error parsing Python script output:\", parseError);\n            console.log(\"Python script output (first 500 chars):\", stdout.substring(0, 500));\n            console.log(\"Python script output (last 500 chars):\", stdout.substring(stdout.length - 500));\n            if (isLargeCapTicker) {\n                return res.status(500).json({\n                    message: \"This filing is complex and may require special handling. Please try a smaller company or a different period.\",\n                    error: parseError.message,\n                    partial_output: stdout.substring(0, 500) + \"...[truncated]...\"\n                });\n            }\n            return res.status(500).json({\n                message: \"Error parsing Python script output\",\n                error: parseError.message,\n                partial_output: stdout.substring(0, 1000) + \"...[truncated]...\" + stdout.substring(stdout.length - 1000)\n            });\n        }\n        if (result.error) {\n            if (result.error.includes(\"Filing could not be processed\")) {\n                return res.status(404).json({\n                    message: `No filing found for ${ticker} ${formType} ${year}`\n                });\n            }\n            if ((isSpecialTicker || isLargeCapTicker) && result.error.includes(\"table of contents\")) {\n                return res.status(500).json({\n                    message: \"This company has complex filings with a special structure. We are using a generic table of contents.\"\n                });\n            }\n            return res.status(500).json({\n                message: result.error\n            });\n        }\n        // Store embeddings\n        const embedResponse = await node_fetch__WEBPACK_IMPORTED_MODULE_2___default()(\"http://localhost:3001/api/store-embeddings\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                chunks: result.chunked.chunks,\n                metadata: {\n                    ticker\n                }\n            })\n        });\n        let embedData;\n        try {\n            embedData = await embedResponse.json();\n        } catch (error) {\n            // Handle non-JSON responses (e.g., 413 Payload Too Large)\n            const responseText = await embedResponse.text();\n            console.error(\"Failed to parse store-embeddings response:\", responseText);\n            return res.status(embedResponse.status).json({\n                message: \"Failed to store embeddings\",\n                details: responseText || \"Invalid response from store-embeddings\"\n            });\n        }\n        if (!embedResponse.ok) {\n            console.error(\"Embedding error:\", embedData);\n            return res.status(embedResponse.status).json({\n                message: \"Failed to store embeddings\",\n                details: embedData.error || \"Unknown error\"\n            });\n        } else {\n            console.log(\"Embedding success:\", embedData);\n        }\n        return res.status(200).json({\n            ...result,\n            year: year,\n            embedData: {\n                upsertedCount: embedData.upsertedCount,\n                skippedCount: embedData.skippedCount\n            }\n        });\n    } catch (error) {\n        console.error(\"Error executing Python script:\", error);\n        if (isLargeCapTicker && error.message.includes(\"maxBuffer exceeded\")) {\n            return res.status(500).json({\n                message: \"This filing is very large and complex. Try using a different year or form type.\",\n                error: \"Size limit exceeded\"\n            });\n        }\n        return res.status(500).json({\n            message: `Error processing SEC filing: ${error.message}`,\n            stack:  true ? error.stack : 0\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUk7WUFDOUI7UUFDRixPQUFPO1lBQ0xuQixRQUFRQyxHQUFHLENBQUMsc0JBQXNCNEI7UUFDcEM7UUFFQSxPQUFPbkQsSUFBSUcsTUFBTSxDQUFDLEtBQUtFLElBQUksQ0FBQztZQUMxQixHQUFHK0IsTUFBTTtZQUNUM0IsTUFBTUE7WUFDTjBDLFdBQVc7Z0JBQ1RJLGVBQWVKLFVBQVVJLGFBQWE7Z0JBQ3RDQyxjQUFjTCxVQUFVSyxZQUFZO1lBQ3RDO1FBQ0Y7SUFDRixFQUFFLE9BQU9mLE9BQU87UUFDZG5CLFFBQVFtQixLQUFLLENBQUMsa0NBQWtDQTtRQUVoRCxJQUFJckIsb0JBQW9CcUIsTUFBTW5DLE9BQU8sQ0FBQ0ssUUFBUSxDQUFDLHVCQUF1QjtZQUNwRSxPQUFPWCxJQUFJRyxNQUFNLENBQUMsS0FBS0UsSUFBSSxDQUFDO2dCQUMxQkMsU0FBUztnQkFDVG1DLE9BQU87WUFDVDtRQUNGO1FBRUEsT0FBT3pDLElBQUlHLE1BQU0sQ0FBQyxLQUFLRSxJQUFJLENBQUM7WUFDMUJDLFNBQVMsQ0FBQyw2QkFBNkIsRUFBRW1DLE1BQU1uQyxPQUFPLENBQUMsQ0FBQztZQUN4RG1ELE9BQU8vQixLQUF5QixHQUFnQmUsTUFBTWdCLEtBQUssR0FBR0MsQ0FBU0E7UUFDekU7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmFja2VuZC8uL3BhZ2VzL2FwaS9wYXJzZS1maWxpbmcuanM/YzkxNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBleGVjIH0gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XHJcbmltcG9ydCB1dGlsIGZyb20gJ3V0aWwnO1xyXG5pbXBvcnQgZmV0Y2ggZnJvbSAnbm9kZS1mZXRjaCc7XHJcblxyXG5jb25zdCBleGVjUHJvbWlzZSA9IHV0aWwucHJvbWlzaWZ5KGV4ZWMpO1xyXG5cclxuY29uc3QgTEFSR0VfQ0FQX1RJQ0tFUlMgPSBbXHJcbiAgJ0FBUEwnLCAnTVNGVCcsICdBTVpOJywgJ0dPT0dMJywgJ0dPT0cnLCAnTUVUQScsICdUU0xBJywgJ0JSSy5BJywgJ0JSSy5CJywgXHJcbiAgJ0pQTScsICdWJywgJ1BHJywgJ1VOSCcsICdIRCcsICdNQScsICdCQUMnLCAnWE9NJywgJ0RJUycsICdOVkRBJywgJ1BZUEwnLFxyXG4gICdBREJFJywgJ0lOVEMnLCAnQ01DU0EnLCAnUEZFJywgJ1dNVCcsICdDUk0nLCAnTkZMWCcsICdWWicsICdBQlQnLCAnS08nXHJcbl07XHJcblxyXG4vLyBWYWxpZCBTRUMgZm9ybSB0eXBlc1xyXG5jb25zdCBWQUxJRF9GT1JNX1RZUEVTID0gWycxMC1LJywgJzEwLVEnXTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICAvLyBDT1JTIGhlYWRlcnNcclxuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscycsIHRydWUpO1xyXG4gIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICcqJyk7XHJcbiAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsT1BUSU9OUyxQQVRDSCxERUxFVEUsUE9TVCxQVVQnKTtcclxuICByZXMuc2V0SGVhZGVyKFxyXG4gICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLFxyXG4gICAgJ1gtQ1NSRi1Ub2tlbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQWNjZXB0LCBBY2NlcHQtVmVyc2lvbiwgQ29udGVudC1MZW5ndGgsIENvbnRlbnQtTUQ1LCBDb250ZW50LVR5cGUsIERhdGUsIFgtQXBpLVZlcnNpb24nXHJcbiAgKTtcclxuXHJcbiAgaWYgKHJlcS5tZXRob2QgPT09ICdPUFRJT05TJykge1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmVuZCgpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgbWVzc2FnZTogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XHJcbiAgfVxyXG5cclxuICBjb25zdCB7IHRpY2tlciwgZm9ybVR5cGUsIHllYXIgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAvLyBWYWxpZGF0ZSBpbnB1dHNcclxuICBpZiAoIXRpY2tlciB8fCAhZm9ybVR5cGUgfHwgIXllYXIpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdNaXNzaW5nIHJlcXVpcmVkIHBhcmFtZXRlcnM6IHRpY2tlciwgZm9ybVR5cGUsIHllYXInIH0pO1xyXG4gIH1cclxuXHJcbiAgaWYgKCFWQUxJRF9GT1JNX1RZUEVTLmluY2x1ZGVzKGZvcm1UeXBlLnRvVXBwZXJDYXNlKCkpKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBgSW52YWxpZCBmb3JtIHR5cGU6ICR7Zm9ybVR5cGV9LiBTdXBwb3J0ZWQgdHlwZXMgYXJlICR7VkFMSURfRk9STV9UWVBFUy5qb2luKCcsICcpfS5gIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgY3VycmVudFllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XHJcbiAgY29uc3QgeWVhckludCA9IHBhcnNlSW50KHllYXIpO1xyXG4gIGlmIChpc05hTih5ZWFySW50KSB8fCB5ZWFySW50ID4gY3VycmVudFllYXIpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IGBJbnZhbGlkIHllYXIgJHt5ZWFyfS4gTXVzdCBiZSBhIG51bWJlciBub3QgZXhjZWVkaW5nIHRoZSBjdXJyZW50IHllYXIgKCR7Y3VycmVudFllYXJ9KS5gIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgaXNMYXJnZUNhcFRpY2tlciA9IExBUkdFX0NBUF9USUNLRVJTLmluY2x1ZGVzKHRpY2tlci50b1VwcGVyQ2FzZSgpKTtcclxuICBjb25zdCBpc1NwZWNpYWxUaWNrZXIgPSB0aWNrZXIudG9VcHBlckNhc2UoKSA9PT0gJ1RTTEEnO1xyXG4gIFxyXG4gIGlmIChpc0xhcmdlQ2FwVGlja2VyKSB7XHJcbiAgICBjb25zb2xlLmxvZyhgVXNpbmcgZW5oYW5jZWQgaGFuZGxpbmcgZm9yICR7dGlja2VyLnRvVXBwZXJDYXNlKCl9IGZpbGluZyAobGFyZ2UgY2FwIHN0b2NrKWApO1xyXG4gIH1cclxuICBcclxuICB0cnkge1xyXG4gICAgY29uc3QgcHl0aG9uQXJncyA9IGAke3RpY2tlcn0gJHtmb3JtVHlwZX0gJHt5ZWFyfWA7XHJcbiAgICBjb25zdCBweXRob25Db21tYW5kID0gYHB5IFwiJHtwcm9jZXNzLmN3ZCgpfS9zZWNfcGFyc2VyLnB5XCIgJHtweXRob25BcmdzfWA7XHJcbiAgICBjb25zb2xlLmxvZyhgRXhlY3V0aW5nIGNvbW1hbmQ6ICR7cHl0aG9uQ29tbWFuZH1gKTtcclxuICAgIFxyXG4gICAgbGV0IG1heEJ1ZmZlciA9IDEwICogMTAyNCAqIDEwMjQ7IC8vIDEwTUIgZGVmYXVsdFxyXG4gICAgaWYgKGlzU3BlY2lhbFRpY2tlcikge1xyXG4gICAgICBtYXhCdWZmZXIgPSA1MCAqIDEwMjQgKiAxMDI0OyAvLyA1ME1CIGZvciBUU0xBXHJcbiAgICB9IGVsc2UgaWYgKGlzTGFyZ2VDYXBUaWNrZXIpIHtcclxuICAgICAgbWF4QnVmZmVyID0gMzAgKiAxMDI0ICogMTAyNDsgLy8gMzBNQiBmb3IgbGFyZ2UgY2Fwc1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhgVXNpbmcgbWF4QnVmZmVyIG9mICR7bWF4QnVmZmVyLygxMDI0KjEwMjQpfU1CIGZvciAke3RpY2tlcn1gKTtcclxuICAgIFxyXG4gICAgY29uc3QgeyBzdGRvdXQsIHN0ZGVyciB9ID0gYXdhaXQgZXhlY1Byb21pc2UocHl0aG9uQ29tbWFuZCwgeyBtYXhCdWZmZXIgfSk7XHJcbiAgICBcclxuICAgIGlmIChzdGRlcnIgJiYgc3RkZXJyLnRyaW0oKSAhPT0gJycpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1B5dGhvbiBzY3JpcHQgbWVzc2FnZXM6Jywgc3RkZXJyKTtcclxuICAgICAgY29uc3QgaXNBcnRpZmljaWFsU2VjdGlvbk1lc3NhZ2UgPSBzdGRlcnIuaW5jbHVkZXMoJ05vIHNlY3Rpb25zIHBhcnNlZDsgc2FtcGxlIGNvbnRlbnQ6JykgJiYgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzdGRlcnIuaW5jbHVkZXMoJ0NyZWF0ZWQgYXJ0aWZpY2lhbCBzZWN0aW9ucycpIHx8IGlzTGFyZ2VDYXBUaWNrZXIpO1xyXG4gICAgICBjb25zdCBjb250YWluc0Vycm9ycyA9IHN0ZGVyci5pbmNsdWRlcygnRVJST1I6JykgJiYgIWlzQXJ0aWZpY2lhbFNlY3Rpb25NZXNzYWdlICYmICghc3Rkb3V0IHx8IHN0ZG91dC50cmltKCkgPT09ICcnKTtcclxuICAgICAgY29uc3QgY29udGFpbnNPbmx5V2FybmluZ3MgPSBzdGRlcnIuaW5jbHVkZXMoJ1dBUk5JTkc6JykgJiYgIWNvbnRhaW5zRXJyb3JzO1xyXG4gICAgICBcclxuICAgICAgaWYgKChpc1NwZWNpYWxUaWNrZXIgfHwgaXNMYXJnZUNhcFRpY2tlcikgJiYgc3RkZXJyLmluY2x1ZGVzKCd0YWJsZSBvZiBjb250ZW50cycpICYmIGNvbnRhaW5zRXJyb3JzKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXHJcbiAgICAgICAgICBtZXNzYWdlOiBgVGhpcyBmaWxpbmcgaGFzIGEgY29tcGxleCBmb3JtYXQuIFdlJ3JlIHVzaW5nIGEgZmFsbGJhY2sgbWV0aG9kIHRvIHBhcnNlIGl0LmAsXHJcbiAgICAgICAgICBkZXRhaWxzOiBzdGRlcnJcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKGNvbnRhaW5zRXJyb3JzKSB7XHJcbiAgICAgICAgaWYgKHN0ZGVyci5pbmNsdWRlcygnTm8gZmlsaW5nIGZvdW5kJykpIHtcclxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6IGBObyBmaWxpbmcgZm91bmQgZm9yICR7dGlja2VyfSAke2Zvcm1UeXBlfSAke3llYXJ9YCB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogYEVycm9yIHByb2Nlc3NpbmcgU0VDIGZpbGluZzogJHtzdGRlcnJ9YCB9KTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coJ1Byb2Nlc3NpbmcgY29udGludWVzIHdpdGggd2FybmluZ3M6Jywgc3RkZXJyKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgbGV0IHJlc3VsdDtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHRyaW1tZWRPdXRwdXQgPSBzdGRvdXQudHJpbSgpO1xyXG4gICAgICBpZiAoIXRyaW1tZWRPdXRwdXQpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcclxuICAgICAgICAgIG1lc3NhZ2U6ICdFbXB0eSByZXNwb25zZSBmcm9tIFB5dGhvbiBzY3JpcHQnLFxyXG4gICAgICAgICAgc3RkZXJyOiBzdGRlcnJcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmVzdWx0ID0gSlNPTi5wYXJzZSh0cmltbWVkT3V0cHV0KTtcclxuICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyBQeXRob24gc2NyaXB0IG91dHB1dDonLCBwYXJzZUVycm9yKTtcclxuICAgICAgY29uc29sZS5sb2coJ1B5dGhvbiBzY3JpcHQgb3V0cHV0IChmaXJzdCA1MDAgY2hhcnMpOicsIHN0ZG91dC5zdWJzdHJpbmcoMCwgNTAwKSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdQeXRob24gc2NyaXB0IG91dHB1dCAobGFzdCA1MDAgY2hhcnMpOicsIHN0ZG91dC5zdWJzdHJpbmcoc3Rkb3V0Lmxlbmd0aCAtIDUwMCkpO1xyXG4gICAgICBcclxuICAgICAgaWYgKGlzTGFyZ2VDYXBUaWNrZXIpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcclxuICAgICAgICAgIG1lc3NhZ2U6ICdUaGlzIGZpbGluZyBpcyBjb21wbGV4IGFuZCBtYXkgcmVxdWlyZSBzcGVjaWFsIGhhbmRsaW5nLiBQbGVhc2UgdHJ5IGEgc21hbGxlciBjb21wYW55IG9yIGEgZGlmZmVyZW50IHBlcmlvZC4nLFxyXG4gICAgICAgICAgZXJyb3I6IHBhcnNlRXJyb3IubWVzc2FnZSxcclxuICAgICAgICAgIHBhcnRpYWxfb3V0cHV0OiBzdGRvdXQuc3Vic3RyaW5nKDAsIDUwMCkgKyAnLi4uW3RydW5jYXRlZF0uLi4nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxyXG4gICAgICAgIG1lc3NhZ2U6ICdFcnJvciBwYXJzaW5nIFB5dGhvbiBzY3JpcHQgb3V0cHV0JywgXHJcbiAgICAgICAgZXJyb3I6IHBhcnNlRXJyb3IubWVzc2FnZSxcclxuICAgICAgICBwYXJ0aWFsX291dHB1dDogc3Rkb3V0LnN1YnN0cmluZygwLCAxMDAwKSArICcuLi5bdHJ1bmNhdGVkXS4uLicgKyBzdGRvdXQuc3Vic3RyaW5nKHN0ZG91dC5sZW5ndGggLSAxMDAwKVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHJlc3VsdC5lcnJvcikge1xyXG4gICAgICBpZiAocmVzdWx0LmVycm9yLmluY2x1ZGVzKCdGaWxpbmcgY291bGQgbm90IGJlIHByb2Nlc3NlZCcpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogYE5vIGZpbGluZyBmb3VuZCBmb3IgJHt0aWNrZXJ9ICR7Zm9ybVR5cGV9ICR7eWVhcn1gIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICgoaXNTcGVjaWFsVGlja2VyIHx8IGlzTGFyZ2VDYXBUaWNrZXIpICYmIHJlc3VsdC5lcnJvci5pbmNsdWRlcygndGFibGUgb2YgY29udGVudHMnKSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxyXG4gICAgICAgICAgbWVzc2FnZTogJ1RoaXMgY29tcGFueSBoYXMgY29tcGxleCBmaWxpbmdzIHdpdGggYSBzcGVjaWFsIHN0cnVjdHVyZS4gV2UgYXJlIHVzaW5nIGEgZ2VuZXJpYyB0YWJsZSBvZiBjb250ZW50cy4nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogcmVzdWx0LmVycm9yIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBTdG9yZSBlbWJlZGRpbmdzXHJcbiAgICBjb25zdCBlbWJlZFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMS9hcGkvc3RvcmUtZW1iZWRkaW5ncycsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgY2h1bmtzOiByZXN1bHQuY2h1bmtlZC5jaHVua3MsXHJcbiAgICAgICAgbWV0YWRhdGE6IHsgdGlja2VyIH1cclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXQgZW1iZWREYXRhO1xyXG4gICAgdHJ5IHtcclxuICAgICAgZW1iZWREYXRhID0gYXdhaXQgZW1iZWRSZXNwb25zZS5qc29uKCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAvLyBIYW5kbGUgbm9uLUpTT04gcmVzcG9uc2VzIChlLmcuLCA0MTMgUGF5bG9hZCBUb28gTGFyZ2UpXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IGF3YWl0IGVtYmVkUmVzcG9uc2UudGV4dCgpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcGFyc2Ugc3RvcmUtZW1iZWRkaW5ncyByZXNwb25zZTonLCByZXNwb25zZVRleHQpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyhlbWJlZFJlc3BvbnNlLnN0YXR1cykuanNvbih7IFxyXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gc3RvcmUgZW1iZWRkaW5ncycsIFxyXG4gICAgICAgIGRldGFpbHM6IHJlc3BvbnNlVGV4dCB8fCAnSW52YWxpZCByZXNwb25zZSBmcm9tIHN0b3JlLWVtYmVkZGluZ3MnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghZW1iZWRSZXNwb25zZS5vaykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFbWJlZGRpbmcgZXJyb3I6JywgZW1iZWREYXRhKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoZW1iZWRSZXNwb25zZS5zdGF0dXMpLmpzb24oeyBcclxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHN0b3JlIGVtYmVkZGluZ3MnLCBcclxuICAgICAgICBkZXRhaWxzOiBlbWJlZERhdGEuZXJyb3IgfHwgJ1Vua25vd24gZXJyb3InXHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coJ0VtYmVkZGluZyBzdWNjZXNzOicsIGVtYmVkRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgXHJcbiAgICAgIC4uLnJlc3VsdCwgXHJcbiAgICAgIHllYXI6IHllYXIsIC8vIEFkZCB0b3AtbGV2ZWwgeWVhciBmaWVsZFxyXG4gICAgICBlbWJlZERhdGE6IHtcclxuICAgICAgICB1cHNlcnRlZENvdW50OiBlbWJlZERhdGEudXBzZXJ0ZWRDb3VudCxcclxuICAgICAgICBza2lwcGVkQ291bnQ6IGVtYmVkRGF0YS5za2lwcGVkQ291bnRcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGV4ZWN1dGluZyBQeXRob24gc2NyaXB0OicsIGVycm9yKTtcclxuICAgIFxyXG4gICAgaWYgKGlzTGFyZ2VDYXBUaWNrZXIgJiYgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnbWF4QnVmZmVyIGV4Y2VlZGVkJykpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXHJcbiAgICAgICAgbWVzc2FnZTogJ1RoaXMgZmlsaW5nIGlzIHZlcnkgbGFyZ2UgYW5kIGNvbXBsZXguIFRyeSB1c2luZyBhIGRpZmZlcmVudCB5ZWFyIG9yIGZvcm0gdHlwZS4nLFxyXG4gICAgICAgIGVycm9yOiAnU2l6ZSBsaW1pdCBleGNlZWRlZCdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxyXG4gICAgICBtZXNzYWdlOiBgRXJyb3IgcHJvY2Vzc2luZyBTRUMgZmlsaW5nOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgc3RhY2s6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcclxuICAgIH0pO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJleGVjIiwidXRpbCIsImZldGNoIiwiZXhlY1Byb21pc2UiLCJwcm9taXNpZnkiLCJMQVJHRV9DQVBfVElDS0VSUyIsIlZBTElEX0ZPUk1fVFlQRVMiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwic2V0SGVhZGVyIiwibWV0aG9kIiwic3RhdHVzIiwiZW5kIiwianNvbiIsIm1lc3NhZ2UiLCJ0aWNrZXIiLCJmb3JtVHlwZSIsInllYXIiLCJib2R5IiwiaW5jbHVkZXMiLCJ0b1VwcGVyQ2FzZSIsImpvaW4iLCJjdXJyZW50WWVhciIsIkRhdGUiLCJnZXRGdWxsWWVhciIsInllYXJJbnQiLCJwYXJzZUludCIsImlzTmFOIiwiaXNMYXJnZUNhcFRpY2tlciIsImlzU3BlY2lhbFRpY2tlciIsImNvbnNvbGUiLCJsb2ciLCJweXRob25BcmdzIiwicHl0aG9uQ29tbWFuZCIsInByb2Nlc3MiLCJjd2QiLCJtYXhCdWZmZXIiLCJzdGRvdXQiLCJzdGRlcnIiLCJ0cmltIiwiaXNBcnRpZmljaWFsU2VjdGlvbk1lc3NhZ2UiLCJjb250YWluc0Vycm9ycyIsImNvbnRhaW5zT25seVdhcm5pbmdzIiwiZGV0YWlscyIsInJlc3VsdCIsInRyaW1tZWRPdXRwdXQiLCJKU09OIiwicGFyc2UiLCJwYXJzZUVycm9yIiwiZXJyb3IiLCJzdWJzdHJpbmciLCJsZW5ndGgiLCJwYXJ0aWFsX291dHB1dCIsImVtYmVkUmVzcG9uc2UiLCJoZWFkZXJzIiwic3RyaW5naWZ5IiwiY2h1bmtzIiwiY2h1bmtlZCIsIm1ldGFkYXRhIiwiZW1iZWREYXRhIiwicmVzcG9uc2VUZXh0IiwidGV4dCIsIm9rIiwidXBzZXJ0ZWRDb3VudCIsInNraXBwZWRDb3VudCIsInN0YWNrIiwidW5kZWZpbmVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/parse-filing.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fparse-filing&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cparse-filing.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();